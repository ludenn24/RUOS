{% extends 'admin/templates/app.twig' %}
{% block content %}
<style>
   ul.timeline {
   list-style-type: none;
   position: relative;
   }
   ul.timeline:before {
   content: ' ';
   background: #d4d9df;
   display: inline-block;
   position: absolute;
   left: 29px;
   width: 2px;
   height: 100%;
   z-index: 400;
   }
   ul.timeline > li {
   margin: 20px 0;
   padding-left: 50px;
   }
   ul.timeline > li:before {
   content: ' ';
   background: white;
   display: inline-block;
   position: absolute;
   border-radius: 50%;
   border: 3px solid #607D8B;
   left: 20px;
   width: 20px;
   height: 20px;
   z-index: 400;
   }
   td.details-control {
   background: url('{{base_url()}}/images/details_open.png') no-repeat center center;
   cursor: pointer;
   }
   tr.shown td.details-control {
   background: url('{{base_url()}}//images/details_close.png') no-repeat center center;
   }
</style>
<body class="hold-transition skin-blue sidebar-mini ">
   <div class="pace  pace-inactive">
      <div class="pace-progress" data-progress-text="100%" data-progress="99"
         style="transform: translate3d(100%, 0px, 0px);">
         <div class="pace-progress-inner"></div>
      </div>
      <div class="pace-activity"></div>
   </div>
   <div class="wrapper">
   <header class="main-header">
      <!-- Logo -->
      <a href="../admin/dash" class="logo">
         <!-- mini logo for sidebar mini 50x50 pixels -->
         <span class="logo-mini"><b>R</b>S</span>
         <!-- logo for regular state and mobile devices -->
         <span class="logo-lg"><b style="font-style:oblique;">RUOS</b></span>
      </a>
      <!-- Header Navbar: style can be found in header.less -->
      <nav class="navbar navbar-static-top" role="navigation">
         <!-- Sidebar toggle button-->
         <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         </a>
         <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
               <!-- User Account: style can be found in dropdown.less -->
               <li class="dropdown user user-menu">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <img src="{{ base_url() }}/dist/img/logini.jpg" class="user-image" alt="User Image">
                  <span class="hidden-xs"><?php echo $_SESSION['ses_correouser'];?></span>
                  </a>
                  <ul class="dropdown-menu">
                     <!-- User image -->
                     <li class="user-header">
                        <img src="{{ base_url() }}/dist/img/logini.jpg" class="img-circle" alt="User Image">
                        <p>
                           {{ AdminController.admin.nombres }}
                           <small>{{ AdminController.admin.dni }}</small>
                           <small>Administrador</small>
                        </p>
                     </li>
                     <!-- Menu Footer-->
                     <li class="user-footer" style="border: 1px solid #3C8DBC;">
                        <div class="pull-right">
                           <a href="#" class="btn btn-default btn-flat" id="changeses"
                              style="border: 1px solid #3C8DBC;">Cerrar sesión</a>
                        </div>
                     </li>
                  </ul>
               </li>
               <!-- Control Sidebar Toggle Button -->
               <li>
                  <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
               </li>
            </ul>
         </div>
      </nav>
   </header>
   <aside class="main-sidebar">
      {% include 'admin/templates/menu.twig' %}
   </aside>
   <body class="hold-transition skin-blue sidebar-mini ">
      <div class="pace  pace-inactive">
         <div class="pace-progress" data-progress-text="100%" data-progress="99"
            style="transform: translate3d(100%, 0px, 0px);">
            <div class="pace-progress-inner"></div>
         </div>
         <div class="pace-activity"></div>
      </div>
      <div class="wrapper">
         <!-- Content Wrapper. Contains page content -->
         <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
               <h1>
                  Solicitud
                  <strong> {{ model.num_sol }}</strong> |
                  <breadcrumb>{{ model.nombre_org }}</breadcrumb>
               </h1>
            </section>
            <!-- Main content -->
            <section class="content">
               <div class="row">
                  <div class="col-md-6">
                     <div class="box box-primary">
                        <div class="box-header with-border">
                           <i class="fa fa-info-circle"></i>
                           <h3 class="box-title">Organización</h3>
                        </div>
                        <div class="box-body">
                           <form name="FormActualizarOrganizacion" id="FormActualizarOrganizacion" method="post">
                              <input type="hidden" value="{{ model.codigo }}" id="codigorg" name="codigorg">
                              <input type="hidden" value="{{ model.distrito }}" id="distrito_org" name="distrito_org">
                              <div class="col-md-3">
                                 <div class="form-group">
                                    <label>Número</label>
                                    <input type="text" value="{{ model.num_org }}" id="num_org"
                                       data-content="Debes ingresar un número de organización"
                                       name="num_org" class="form-control form-input obligate-org">
                                 </div>
                              </div>
                              <div class="col-md-9">
                                 <div class="form-group">
                                    <label>Nombre</label>
                                    <input type="text" value="{{ model.nombre_org }}" id="nom_org"
                                       data-content="Debes ingresar un nombre"
                                       name="nom_org" class="form-control form-input obligate-org">
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label for="exampleInputPassword1">Tipo</label>
                                    <select class="form-control form-select obligate-org" id="tipo" name="tipo">
                                       <option value="">Seleccionar el tipo de organización social</option>
                                       <option {% if model.tipo_org  == 1 %}selected{% endif %} value="1">
                                       Organizaciones vecinales
                                       </option>
                                       <option {% if model.tipo_org  == 2 %}selected{% endif %} value="2">
                                       Organizaciones sociales de base de apoyo alimentaria
                                       </option>
                                       <option {% if model.tipo_org  == 3 %}selected{% endif %} value="3">
                                       Organizaciones temáticas
                                       </option>
                                       <option {% if model.tipo_org  == 4 %}selected{% endif %} value="4">
                                       Organizaciones de poblaciones vulnerables
                                       </option>
                                       <option {% if model.tipo_org  == 5 %}selected{% endif %} value="5">
                                       Organizaciones económicas
                                       </option>
                                       <option {% if model.tipo_org  == 6 %}selected{% endif %} value="6">
                                       Organizaciones deportivas
                                       </option>
                                    </select>
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label>Nivel</label>
                                    <select class="form-control form-select obligate-org" id="nivel"
                                       data-content="Debe seleccionar a que nivel pertenece"
                                       name="nivel">
                                       <option value="">Seleccionar el nivel</option>
                                       <option {% if model.nivel  == 1 %}selected{% endif %} value="1">
                                       Local
                                       </option>
                                       <option {% if model.nivel  == 2 %}selected{% endif %} value="2">
                                       Zonal
                                       </option>
                                       <option {% if model.nivel  == 3 %}selected{% endif %} value="3">
                                       Distrital
                                       </option>
                                       <option {% if model.nivel  == 4 %}selected{% endif %} value="4">
                                       Interdistrital
                                       </option>
                                       <option {% if model.nivel  == 5 %}selected{% endif %} value="5">
                                       Metropolitana
                                       </option>
                                    </select>
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label for="exampleInputEmail1">Fecha de constitución</label>
                                    <div class="input-group">
                                       <div class="input-group-addon">
                                          <i class="fa fa-calendar"></i>
                                       </div>
                                       <input type="date" class="form-control obligate-org"
                                          value="{{ model.fecha_constitucion }}" id="fecha_cons"
                                          name="fecha_cons">
                                    </div>
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label for="exampleInputEmail1">Número de miembros</label>
                                    <input type="number" value="{{ model.num_miem }}" id="num_miem"
                                       name="num_miem" class="form-control form-input obligate-org">
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label for="exampleInputEmail1">Dirección</label>
                                    <textarea type="text" class="form-control obligate-org" id="dir_org"
                                       name="dir_org"
                                       placeholder="Nombre de Organización">{{ model.domicilio_org }}</textarea>
                                 </div>
                              </div>
                              <div class="col-md-6">
                                 <div class="form-group">
                                    <label for="exampleInputEmail1">Fines</label>
                                    <textarea type="text" class="form-control" id="fines"
                                       name="fines">{{ model.fines }}</textarea>
                                 </div>
                              </div>
                              <div class="col-md-12">
                                 <div  class="msg"></div>
                              </div>
                              {{ csrf.field | raw }}
                           </form>
                        </div>
                        <div class="box-footer">
                           <button type="button" id="updateorg" class="btn bg-olive margin">Guardar</button>
                        </div>
                     </div>
                  </div>

                  <div class="col-md-6">
                     <div class="col-md-6">
                        <div class="box box-solid">
                           <div class="box-header with-border">
                              <i class="fa fa-user"></i>
                              <h3 class="box-title">Solicitante</h3>
                           </div>
                           <div class="box-body">
                             <form name="FormActualizarSolicitante" id="FormActualizarSolicitante" method="post">

                               <input type="hidden" value="{{ model.cod_solicitante }}" id="cod_solicitante" name="cod_solicitante">

                               <div class="col-md-12">
                                 <div class="form-group">
                                   <label>DNI</label>
                                   <input type="text" value="{{ model.dni }}" class="form-control form-input obligate-org" disabled>
                                 </div>
                               </div>
                               <div class="col-md-5">
                                 <div class="form-group">
                                   <label>Nombre</label>
                                   <input type="text" value="{{ model.nombres }}" class="form-control form-input obligate-org" disabled>
                                 </div>
                               </div>
                               <div class="col-md-7">
                                 <div class="form-group">
                                   <label>Apellidos</label>
                                   <input type="text" value="{{ model.apellidopaterno }} {{ model.apellidomaterno }}" class="form-control form-input obligate-org" disabled>
                                 </div>
                               </div>
                               <div class="col-md-6">
                                 <div class="form-group">
                                   <label>Teléfono</label>
                                   <input type="text" value="{{ model.telefono }}" class="form-control form-input obligate-org" disabled>
                                 </div>
                               </div>
                               <div class="col-md-6">
                                 <div class="form-group">
                                   <label>Casa Vecinal</label>
                                   <input type="number" value="{{ model.casa }}" id="sol_casa" name="sol_casa"
                                          data-content="Debe ingresar una casa vecinal"
                                          class="form-control form-input obligate-sol">
                                 </div>
                               </div>

                               <div class="col-md-12">
                                 <div  class="msgsol"></div>
                               </div>
                               {{ csrf.field | raw }}
                             </form>

                           </div>
                          <div class="box-footer">
                            <button type="button" id="updatesolicitante" class="btn bg-olive margin">Guardar</button>
                          </div>
                        </div>
                     </div>
                     <div class="col-md-6">
                        <div class="box box-solid ">
                           <div class="box-header with-border">
                              <i class="fa fa-file-text"></i>
                              <h3 class="box-title">Solicitud</h3>
                           </div>
                           <!-- /.box-header -->
                           <div class="box-body">
                              <table class="table table-bordered" cellpadding="5">
                                 <tbody>
                                    <tr>
                                       <th><b>ESTADO:</b></th>
                                       <td>
                                          {% if model.flag == 1 %}
                                          <span class='label label-info'>INCOMPLETO</span>
                                          {% elseif model.flag == 2 %}
                                          <span class='label label-warning'>PENDIENTE</span>
                                          {% elseif model.flag == 3 %}
                                          <span class='label label-success'>APROBADO</span>
                                          {% else %}
                                          <span class='label label-danger'>ARCHIVADO</span>
                                          {% endif %}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>NÚMERO:</b></th>
                                       <td>
                                          {{ model.num_sol }}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>TIPO DE SOLICITUD:</b></th>
                                       <td>
                                          {% if model.tipo_sol == 1 %}
                                          <span class='label label-info'>REGISTRO NUEVO</span>
                                          {% else %}
                                          <span class='label label-info'>ACTUALIZACIÓN</span>
                                          {% endif %}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>INICIO DE PERIODO:</b> </th>
                                       <td>
                                          {{ model.inicio }}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>FIN  DE PERIODO:</b> </th>
                                       <td>
                                          {{ model.fin }}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>FECHA DE INICIO DE ATENCIÓN:</b> </th>
                                       <td>
                                          {{ model.fec_revision }}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>FECHA MÁXIMA DE ATENCIÓN:</b> </th>
                                       <td>{{ model.fec_venci }}</td>
                                    </tr>
                                    <tr>
                                       <th></th>
                                       <td><button type="button" class="btn btn-primary"
                                          onclick="EditarSolicitud({{ model.codsol }})">
                                          <i class="fa fa-pencil"></i> Editar
                                          </button>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                              <div class="col-xs-12">
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-md-6">
                        <div class="box box-solid">
                           <div class="box-header with-border">
                              <i class="fa  fa-calendar-check-o"></i>
                              <h3 class="box-title">Constatación</h3>
                              {% if cons %}
                              <a class="pull-right"
                                 type="button"
                                 data-toggle="modal"
                                 data-target="#EliminarConstatacion"
                                 data-operation="delete"
                                 data-form="constatacion"
                                 data-content="{{ cons.cod_constatacion }}">
                              <i class="fa fa-times"></i>
                              </a>
                              {% endif %}
                           </div>
                           <div class="box-body">
                              <dl>
                                 <dt>Estado de constatación</dt>
                                 <dd>
                                    {% if cons.estado == 1 %}
                                    <span class='label label-info'>ENVIADO</span>
                                    {% elseif cons.estado == 2 %}
                                    <span class='label label-warning'>OBSERVADO</span>
                                    {% elseif cons.estado == 3 %}
                                    <span class='label label-success'>CONSTATADO</span>
                                    {% else %}
                                    <span class='label label-default'>SIN ENVIAR</span>
                                    {% endif %}
                                 </dd>
                                 <dt>Fecha inicio de constatación</dt>
                                 <dd>
                                    {% if cons %}
                                    {{ cons.fecha_inicio }}
                                    {% else %}
                                    ---
                                    {% endif %}
                                 </dd>
                                 <dt>Fecha máxima de constatación</dt>
                                 <dd>
                                    {% if cons %}
                                    {{ cons.fecha_fin }}
                                    {% else %}
                                    ---
                                    {% endif %}
                              </dl>
                           </div>
                        </div>
                     </div>
                     <div class="col-md-6">
                        <div class="box box-solid ">
                           <div class="box-header with-border">
                              <i class="fa  fa-calendar-check-o"></i>
                              <h3 class="box-title">Resolución</h3>
                              {% if res %}
                              <a class="pull-right"
                                 type="button"
                                 data-toggle="modal"
                                 data-target="#EliminarResolucion"
                                 data-operation="delete"
                                 data-form="resolucion"
                                 data-content="{{ res.codigo }}">
                              <i class="fa fa-times"></i>
                              </a>
                              {% endif %}
                           </div>
                           <div class="box-body">
                              <table class="table table-bordered" cellpadding="5">
                                 <tbody>
                                    <tr>
                                       <th><b>NÚMERO:</b></th>
                                       <td>
                                          {% if res %}
                                          {{ res.num_res }}
                                          {% else %}
                                          ---
                                          {% endif %}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>FECHA DE REGISTRO:</b></th>
                                       <td>
                                          {% if res %}
                                          {{ res.fecha_registro }}
                                          {% else %}
                                          ---
                                          {% endif %}
                                       </td>
                                    </tr>
                                    <tr>
                                       <th><b>ARCHIVO:</b></th>
                                       <td>
                                          {% if res %}
                                          <a target="_blank" href="{{ base_url() }}/{{ res.ruta }}" class="btn btn-primary">Ver
                                          resolución</a>
                                          {% else %}
                                          ---
                                          {% endif %}
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="box">
                  <!-- title row -->
                  <div class="box-header">
                     <div class="col-xs-6">
                        <h2 class="page-header">
                           <i class="fa fa-globe"></i> Documentos
                        </h2>
                     </div>
                     <div class="col-xs-6">
                        <div class="invoice-col pull-right">
                           {% if not res %}
                           <a class="btn btn-app pull-right"
                              data-toggle="modal"
                              data-target="#modalresolucion"
                              data-sol="{{ model.codsol }}">
                           <i class="fa fa-upload"></i> Subir Resolución
                           </a>
                           {% endif %}
                           {% if model.flag == 2 %}
                           <a class="btn btn-app pull-right btn-success" type="button" data-toggle="modal"
                              data-target="#modalaprobar"
                              data-whatever="aprobar"
                              data-content="{{ model.codsol }}"
                              data-numero="{{ model.num_sol }}">
                           <i class="fa fa-legal"></i> Aprobar solicitud
                           </a>
                           {% endif %}
                           <!--  BOTÓN CONSTATACIÓN-->
                           {% if not cons  %}
                           <a class="btn btn-app pull-right"
                              data-toggle="modal"
                              data-target="#modalconstatacion">
                           <i class="fa fa-check-square-o"></i> Enviar constatación
                           </a>
                           {% endif %}
                           <!--  BOTÓN CONSTATACIÓN-->
                           {% if model.flag == 2 %}
                           <a class="btn btn-app pull-right"
                              data-toggle="modal"
                              data-target="#modalrechazo">
                           <i class="fa fa-times"></i> Archivar solicitud
                           </a>
                           {% endif %}
                        </div>
                     </div>
                     <!-- /.col -->
                  </div>
                  <!-- Table row -->
                  <div class="box-body">
                     <div class="col-xs-12 table-responsive">
                        <table id="example" class="table table-bordered table-striped">
                           <thead>
                              <tr>
                                 <th>DOCUMENTO</th>
                                 <th class="center">ARCHIVO</th>
                                 <th class="center">FECHA DE SUBIDA</th>
                                 <th class="center">ESTADO</th>
                                 <th class="center">HISTORIAL</th>
                                 <th class="center">OPERACIONES</th>
                                 <th class="center"> + COMENTARIO</th>
                              </tr>
                           </thead>
                           <tbody>
                              {% for list in doc %}
                              <tr>
                                 <td>
                                    {% if (list.tipdoc=='SOL_GPV') %}
                                    SOLICITUD A LA GERENCIA DE PARTICIPACIÓN VECINAL
                                    {% elseif (list.tipdoc=='ACT_ASAM') %}
                                    ACTA DE ASAMBLEA GENERAL
                                    {% elseif (list.tipdoc=='PAD_ACT') %}
                                    PADRÓN O NÓMINA ACTUALIZADA DE LOS MIEMBROS DE LA ORGANIZACIÓN
                                    {% elseif (list.tipdoc=='EST_ORG') %}
                                    ESTATUTO DE LA ORGANIZACIÓN EN CASO HAYA MODIFICACIÓN PARCIAL O TOTAL
                                    {% elseif (list.tipdoc=='CONV_INVI') %}
                                    CONVOCATORIA O ESQUELA DE INVITACIÓN A LA ASAMBLEA GENERAL
                                    {% elseif (list.tipdoc=='PLA_ACI') %}
                                    PLANO O CROQUIS DEL RADIO DE ACCIÓN DE LA ORGANIZACIÓN *
                                    {% elseif (list.tipdoc=='PLA_UBI') %}
                                    PLANO O CROQUIS REFERENCIAL DE LA UBICACIÓN DEL LOCAL O DOMICILIO INSTITUCIONAL DE LA ORGANIZACIÓN
                                    {% elseif (list.tipdoc=='NOM_MOS') %}
                                    NÓMINA DE LOS MIEMBROS DE LA ORGANIZACIÓN SOCIAL
                                    {% elseif (list.tipdoc=='ACT_ELE') %}
                                    ACTA DE ELECCIÓN DEL ÓRGANO DIRECTIVO
                                    {% elseif (list.tipdoc=='OTR_DOC') %}
                                    OTRO ACERVO listNTAL
                                    {% elseif (list.tipdoc=='NOM_MIEM') %}
                                    NÓMINA DE LOS MIEMBROS DEL ÓRGANO DIRECTIVO
                                    {% elseif (list.tipdoc=='EST_ACT') %}
                                    ESTATUTO Y ACTA DE APROBACIÓN
                                    {% elseif (list.tipdoc=='ACT_FUN') %}
                                    ACTA DE FUNDACIÓN O DE CONSTITUCIÓN
                                    {% elseif (list.tipdoc=='SOL_JU') %}
                                    SOLICITUD DIRIGIDA A LA GERENCIA DE PARTICIPACIÓN VECINAL
                                    {% elseif (list.tipdoc=='MIE_ORG') %}
                                    LISTA DE MIEMBROS DE LA ORGANIZACIÓN
                                    {% elseif (list.tipdoc=='ACT_REU') %}
                                    ACTA DE LA REUNIÓN DE CONSTITUCIÓN
                                    {% endif %}
                                 </td>
                                 <td>
                                    <a class="btn btn-sm btn-primary" href="{{ base_url() }}/{{ list.urldoc }}"
                                       download><i class="fa fa-download"></i></a>
                                 </td>
                                 <td>
                                    {{ list.freg }}
                                 </td>
                                 <td>
                                    {% if list.flag == 1 %}
                                    <span class="label label-info">EN EVALUACIÓN</span>
                                    {% elseif list.flag == 2 %}
                                    <span class="label label-danger">OBSERVADO</span>
                                    {% else %}
                                    <span class='label label-success'>APROVADO</span>
                                    {% endif %}
                                 </td>
                                 <td>
                                    <a class="btn btn-default "
                                       style="cursor:pointer;overflow: visible;"
                                       data-target="#VerHistorial"
                                       id="datamodal"
                                       data-toggle="modal"
                                       data-codigo="{{ model.codsol }}"
                                       data-tipo="{{ list.tipdoc }}"
                                       data-nombre="{% if (list.tipdoc=='SOL_GPV') %}
                                       SOLICITUD A LA GERENCIA DE PARTICIPACIÓN VECINAL
                                       {% elseif (list.tipdoc=='ACT_ASAM') %}
                                       ACTA DE ASAMBLEA GENERAL
                                       {% elseif (list.tipdoc=='PAD_ACT') %}
                                       PADRÓN O NÓMINA ACTUALIZADA DE LOS MIEMBROS DE LA ORGANIZACIÓN
                                       {% elseif (list.tipdoc=='EST_ORG') %}
                                       ESTATUTO DE LA ORGANIZACIÓN EN CASO HAYA MODIFICACIÓN PARCIAL O TOTAL
                                       {% elseif (list.tipdoc=='CONV_INVI') %}
                                       CONVOCATORIA O ESQUELA DE INVITACIÓN A LA ASAMBLEA GENERAL
                                       {% elseif (list.tipdoc=='PLA_ACI') %}
                                       PLANO O CROQUIS DEL RADIO DE ACCIÓN DE LA ORGANIZACIÓN *
                                       {% elseif (list.tipdoc=='PLA_UBI') %}
                                       PLANO O CROQUIS REFERENCIAL DE LA UBICACIÓN DEL LOCAL O DOMICILIO INSTITUCIONAL DE LA ORGANIZACIÓN
                                       {% elseif (list.tipdoc=='NOM_MOS') %}
                                       NÓMINA DE LOS MIEMBROS DE LA ORGANIZACIÓN SOCIAL
                                       {% elseif (list.tipdoc=='ACT_ELE') %}
                                       ACTA DE ELECCIÓN DEL ÓRGANO DIRECTIVO
                                       {% elseif (list.tipdoc=='OTR_DOC') %}
                                       OTRO ACERVO DOCUMENTAL
                                       {% elseif (list.tipdoc=='NOM_MIEM') %}
                                       NÓMINA DE LOS MIEMBROS DEL ÓRGANO DIRECTIVO
                                       {% elseif (list.tipdoc=='EST_ACT') %}
                                       ESTATUTO Y ACTA DE APROBACIÓN
                                       {% elseif (list.tipdoc=='ACT_FUN') %}
                                       ACTA DE FUNDACIÓN O DE CONSTITUCIÓN
                                       {% elseif (list.tipdoc=='SOL_JU') %}
                                       SOLICITUD DIRIGIDA A LA GERENCIA DE PARTICIPACIÓN VECINAL
                                       {% elseif (list.tipdoc=='MIE_ORG') %}
                                       LISTA DE MIEMBROS DE LA ORGANIZACIÓN
                                       {% elseif (list.tipdoc=='ACT_REU') %}
                                       ACTA DE LA REUNIÓN DE CONSTITUCIÓN
                                       {% endif %}">
                                    <i class="fa fa-history"></i>
                                    </a>
                                 </td>
                                 <td>
                                    <button type="button" title="EN EVALUACIÓN"
                                       data-codigo="{{ list.codigo }}"
                                       data-estado="1"
                                       class="btn btn-sm btn-info cambiarestado">
                                    <i class="fa fa-search"></i>
                                    </button>
                                    <button type="button" title="OBSERVADO"
                                       data-codigo="{{ list.codigo }}"
                                       data-estado="2"
                                       class="btn btn-sm btn-danger cambiarestado">
                                    <i class="fa fa-warning"></i>
                                    </button>
                                    <button type="button" title="APROBADO"
                                       data-codigo="{{ list.codigo }}"
                                       data-estado="3"
                                       class="btn btn-sm btn-success cambiarestado">
                                    <i class="fa fa-check"></i>
                                    </button>
                                 </td>
                                 <td>
                                    <a class="btn btn-default "
                                       style="cursor:pointer;overflow: visible;"
                                       data-target="#AgregarAdvertencia"
                                       data-toggle="modal"
                                       data-content="{{ list.codigo }}"
                                       data-user="{{ admin.codigo}}"
                                       data-tipo="{{ list.tipdoc }}"
                                       data-title="{{ list.tipdoc }}"
                                       ><i class="fa fa-comments"></i>
                                    </a>
                                 </td>
                              <tr>
                                 {% endfor %}
                           </tbody>
                        </table>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-md-6">
                     <div class="box">
                        <div class="box-header">
                           <div class="col-xs-12">
                              <h2 class="page-header">
                                 <i class="fa fa-group"></i>  Junta Directiva
                              </h2>
                           </div>
                        </div>
                        <div class="box-body">
                           <div class="col-xs-12 table-responsive">
                              <table id="MiembrosJuntaDirectiva"
                                 class="table table-striped cell-border table-bordered responsive">
                                 <thead>
                                    <tr>
                                       <th></th>
                                       <th>DNI</th>
                                       <th>Cargo</th>
                                       <th>Nombre</th>
                                       <th>Apellidos</th>
                                       <th>Eliminar</th>
                                    </tr>
                                 </thead>
                                 <tfoot>
                                    <tr>
                                       <th></th>
                                       <th>DNI</th>
                                       <th>Cargo</th>
                                       <th>Nombre</th>
                                       <th>Apellidos</th>
                                       <th>Eliminar</th>
                                    </tr>
                                 </tfoot>
                              </table>
                           </div>
                        </div>
                        <div class="box-footer clearfix">
                           <a data-target="#JuntaDirectiva"  id="modalJuntaDirectiva" data-toggle="modal" 
                              data-codigo="{{ organizaciones.codigo }}" class="btn btn-sm btn-info btn-flat pull-left">Agregar miembro</a>
                        </div>
                     </div>
                  </div>
               </div>
            </section>
         </div>
      </div>
      <div class="modal fade" id="AgregarAdvertencia" tabindex="-1" role="dialog" aria-labelledby="AgregarAdvertencia">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header mod">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="color:#fff;">&times;</span></button>
                  <h4 class="modal-title modtitle" id="AgregarAdvertencia"><strong>cargando...</strong></h4>
               </div>
               <div class="modal-body">
                  <div class="box-body row">
                     <div class="col-sm-12">
                        <div class="form-group">
                           <label>Documento en cuestión</label>
                           <div class="input-group">
                              <span class="input-group-addon" style="width: auto;"><i class="fa fa-bars"></i></span>
                              <input type="text" id="nombredocumento" disabled value="" class="form-control obligate nombredocumento"/>
                           </div>
                        </div>
                     </div>
                     <div class="col-sm-12">
                        <div class="box box-primary direct-chat direct-chat-primary">
                           <div class="box-body">
                              <div class="direct-chat-messages" id="ventanachat">
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-sm-12">
                        <div class="form-group">
                           <label>Mensaje: </label>
                           <form name="my_form" id="my_form" method="post">
                              <input type="hidden" name="codigodocumento" id="codigodocumento" value="">
                              <input type="hidden" name="tipo_user" id="tipo_user" value="2">
                              <input type="hidden" name="iduser" id="iduser" value="">
                              <input type="hidden" name="tipdoc" id="tipdoc" value="">
                              {{ csrf.field | raw }}
                              <textarea class="form-control obligatemsm" id="texto" rows="5" name="texto"
                                 data-content="Usted debe ingresar un mensaje"
                                 id="texto" placeholder="Escriba el mensaje"></textarea>
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
               <div  class="msg"></div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                  <button type="button" id="guardarmensaje" data-loading-text="Guardando..."  class="btn btn-success" autocomplete="off">Guardar</button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="VerHistorial" tabindex="-1" role="dialog" aria-labelledby="VerHistorial">
         <div class="modal-dialog modal-default fade in" role="document">
            <div class="modal-content">
               <div class="modal-header mod">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="color:#fff;">&times;</span></button>
                  <h4 class="modal-title modtitle" id="VerHistorial"><strong>cargando...</strong></h4>
               </div>
               <div class="modal-body">
                  <div class="container mt-5 mb-5">
                     <div class="row">
                        <div class="col-md-6 offset-md-3">
                           <ul class="timeline">
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div  class="msg"></div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="modalinfo" tabindex="-1" role="dialog" aria-labelledby="modalinfo">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header modtitleinfo">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                     aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title modtitle" id="modalinfo"> [ INFORMACIÓN ] </h4>
               </div>
               <div class="modal-body">
                  <center>Esperando mensaje...</center>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="modalaprobar" tabindex="-1" role="dialog" aria-labelledby="modalaprobar">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header modalert">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                     aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title modtitle" id="modalaprobar">[ CONFIRMACIÓN ] </h4>
               </div>
               <div class="modal-body">
                  <h3> ¿Seguro que deseas aprobar la solicitud [{{ model.num_sol}}] ?</h3>
                  <div class="box-body row">
                     <form name="aprobar_form" id="aprobar_form" method="post">
                        <input type="hidden" name="codigo_sol" id="codigo_sol" value="{{ model.codsol}}">
                        <input type="hidden" name="estado" id="estado" value="3">
                        {{ csrf.field | raw }}
                     </form>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa  fa-remove"></i>
                  Cancelar
                  </button>
                  <button type="button" id="aprobar-solicitud" data-loading-text="Aprobando..."
                     class="btn btn-success" autocomplete="off">Aprobar
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="EliminarResolucion" tabindex="-1" role="dialog"
         aria-labelledby="EliminarResolucion">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header modalert">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                     aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title modtitle" id="EliminarConstatacion">[ CONFIRMACIÓN ]</h4>
               </div>
               <div class="modal-body">
                  <h3> ¿Seguro que deseas eliminar la resolución <i
                     class='fa fa-trash'></i> ?</h3>
                        <div class="box-body row">
                     <form name="eliminar_res" id="eliminar_res" method="post">
                        <input type="hidden" name="cod_res" id="cod_res" value="{{ res.codigo }}">
                        <input type="hidden" name="estado" id="estado" value="2">
                        {{ csrf.field | raw }}
                     </form>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa  fa-remove"></i>
                  Cancelar
                  </button>
                  <button type="button" id="eliminar-resolucion" data-loading-text="Eliminando..."
                     class="btn btn-success" autocomplete="off">Eliminar
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="modalconstatacion" tabindex="-1" role="dialog" aria-labelledby="modalconstatacion">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header modalert">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                     aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title modtitle" id="modalconstatacion"><strong>cargando...</strong></h4>
               </div>
               <div class="modal-body">
                  Cargando contenido...espere un momento por favor.
                  <div class="msg"></div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa  fa-remove"></i>
                  Cancelar
                  </button>
                  <button type="button" id="subirconstatacion" class="btn btn-primary subirconstatacion pull-left">
                  Subir
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="modalrechazo" tabindex="-1" role="dialog" aria-labelledby="modalrechazo">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header modalert">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                     aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title modtitle" id="modalrechazo"><strong>[ARCHIVAR SOLICITUD]</strong></h4>
               </div>
               <div class="modal-body">
                  <div class="box-body row">
                     <div class="col-sm-12">
                        <div class="form-group">
                           <label>Motivo: </label>
                           <form name="eliminar_form" id="eliminar_form" method="post">
                              <input type="hidden" name="codigo" id="codigo" value="{{ model.codsol}}">
                              <input type="hidden" name="flag" id="flag" value="4">
                              <textarea class="form-control obligateeliminar" id="comentario" data-content="Debe ingresar un motivo." rows="4" name="comentario"  placeholder="Motivo del archivamiento"></textarea>
                              {{ csrf.field | raw }}
                           </form>
                        </div>
                        <div  class="msg"></div>
                     </div>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa  fa-remove"></i>
                  Cancelar
                  </button>
                  <button type="button" id="rechazarsolicitud" class="btn btn-primary rechazarsolicitud pull-left">
                  Archivar
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade in" id="modalresolucion" tabindex="-1" role="dialog" aria-labelledby="modalresolucion">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header mod">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"
                     style="color:#fff;">&times;</span>
                  </button>
                  <h4 class="modal-title modtitle" id="modalresolucion"><strong>SUBIR RESOLUCIÓN</strong></h4>
               </div>
               <div class="modal-body">
                  <div class="row">
                     <div class="col-sm-12">
                        <form name="resolucion" id="resolucion" method="post" enctype="multipart/form-data">
                           <input type="hidden" name="solicitud" id="solicitud" value="{{ model.codsol}}" />
                           <input type="hidden" name="admin" id="admin" value="{{ admin.codigo }}" />
                           <div class="form-group">
                              <label>Número de resolución</label>
                              <input type="text" class="form-control obligate2" name="num_res" id="num_res" data-content="Ingrese el número de resolución"  value=""/>
                           </div>
                           <div class="form-group">
                              <label>Fecha de registro</label>
                              <input type="date" class="form-control obligate2" name="fecha_registro" id="fecha_registro" data-content="Ingrese fecha de registro"  value=""/>
                           </div>
                           <div class="form-group">
                              <label for="exampleInputEmail1">Adjuntar resolución</label>
                              <input class="form-control obligate2" type="file" name="file" id="file" data-content="Debe seleccionar un documento" />
                           </div>
                           {{ csrf.field | raw }}
                        </form>
                     </div>
                     <div class="col-sm-12 barra2 mybarra">
                     </div>
                     <div  class="col-sm-12 msgu2"></div>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                  <button type="button" id="subirresolucion" class="btn btn-primary subirresolucion pull-left">
                  Subir
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="JuntaDirectiva" name="modalEditar" tabindex="-1" role="dialog"
         aria-labelledby="JuntaDirectiva">
         <div class="modal-dialog fade in" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">×</span></button>
                  <h4 class="modal-title">AGREGAR MIEMBRO</h4>
               </div>
               <div class="modal-body">
                  <div class="row">
                     <form class="bg-w-form contact-form" method="post" autccomplete="off"
                        id="FormAgregarMiembro">
                        <input type="hidden" type="text" name="cod_sol" id="cod_sol" value="{{ model.codsol }}">
                        <input type="hidden" type="text" name="departamento" id="departamento" value="">
                        <input type="hidden" type="text" name="provincia" id="provincia" value="">
                        <input type="hidden" type="text" name="distrito" id="distrito" value="">
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>DNI</label>
                              <input type="text" class="form-control obligate3"  onkeyup="buscarDni()" 
                                 id="dni"  name="dni" maxlength="8" 
                                 data-content="Usted debe ingresar el dni."
                                 placeholder="Ingresar nombre" id="txt_nombre_editar">
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Cargo</label>
                              <select class="form-control obligate3" id="cod_puesto" name="cod_puesto"
                                 onChange="puestochange(this)"
                                 data-content="Usted debe seleccionar un cargo.">
                                 <option value="">Seleccionar un cargo</option>
                                 {% for puestos in JuntaDirectivaController.listapuestos %}
                                 <option value="{{ puestos.codigo }}">{{ puestos.puesto }}</option>
                                 {% endfor %}
                              </select>
                           </div>
                        </div>
                        <div class="col-sm-6" id="div-otros" style="display:none;">
                           <div class="form-group">
                              <label>Describir cargo</label>
                              <input type="text" value="" placeholder="Describa el cargo"
                                 id="descripcion_cargo"
                                 name="descripcion_cargo" class="form-control form-input">
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Nombre</label>
                              <input type="text" class="form-control obligate3" placeholder="Ingresar nombre" 
                                 id="nombre"  name="nombre" data-content="Usted debe ingresar el nombre.">
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Apellido Paterno</label>
                              <input type="text" class="form-control obligate3" placeholder="Ingresar apellido paterno" 
                                 id="apellido_pat" name="apellido_pat" data-content="Usted debe ingresar el apellido paterno.">
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Apellido Materno</label>
                              <input type="text" class="form-control obligate3" placeholder="Ingresar apellido materno"
                                 id="apellido_mat" name="apellido_mat" data-content="Usted debe ingresar el apellido materno.">
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Fecha de nacimiento:</label>
                              <div class="input-group date">
                                 <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                 </div>
                                 <input type="text" class="form-control pull-right obligate3" 
                                    onfocus="(this.type = 'date')"
                                    id="fecha_nacimiento" name="fecha_nacimiento"
                                    data-content="Usted debe ingresar la fecha de nacimiento.">
                              </div>
                           </div>
                        </div>
                        <div class="col-sm-6">
                           <div class="form-group">
                              <label>Sexo</label>
                              <select class="form-control" id="sexo" name="sexo"
                                 data-content="Usted debe seleccionar el sexo.">
                                 <option value="">Seleccionar sexo</option>
                                 <option value="f">Femenino</option>
                                 <option value="m">Masculino</option>
                              </select>
                           </div>
                        </div>
                        <div class="col-sm-12">
                           <div class="msg3 col-sm-12">
                           </div>
                        </div>
                        {{ csrf.field | raw }}
                     </form>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cerrar</button>
                  <button type="button"  id="RegistrarMiembro" class="btn btn-primary">Guardar</button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade" id="modalSolicitud" tabindex="-1" role="dialog" aria-labelledby="modalSolicitud">
         <div class="modal-dialog">
            <div class="modal-content">
               <div class="modal-header modalert">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">×</span></button>
                  <h4 class="modal-title modtitle">EDITAR SOLICITUD</h4>
               </div>
               <div class="modal-body">
                  <div class="box-body row">
                     <div class="col-sm-12">
                        <div class="form-group">
                           <form name="formSolicitud" id="formSolicitud" method="post" enctype="multipart/form-data">
                              <input type="hidden"  name="codigo" id="codigo" value="{{ model.codsol }}">
                              <div class="col-sm-12">
                                 <div class="form-group">
                                    <label>Número de solicitud</label>
                                    <input type="text" name="numero" id="numero" class="form-control" value="" disabled>
                                 </div>
                              </div>
                              <div class="col-sm-12">
                                 <div class="form-group">
                                    <label>Inicio de vigencia</label>
                                    <input type="date" name="inicio" id="inicio" class="form-control" value="">
                                 </div>
                              </div>
                              <div class="col-sm-12">
                                 <div class="form-group">
                                    <label>Fin de vigencia</label>
                                    <input type="date" name="fin" id="fin" class="form-control" value="">
                                 </div>
                              </div>
                              {{ csrf.field | raw }}
                           </form>
                        </div>
                        <div  class="msg"></div>
                     </div>
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default pull-left" data-dismiss="modal"><i class="fa  fa-remove"></i> Cancelar</button>
                  <button type="button" href="#" class="btn btn-success guardarfechas">Guardar </button>
               </div>
            </div>
         </div>
      </div>
      <div class="control-sidebar-bg"></div>
      <script type="text/javascript">
         !function (a) {
             "use strict";
             a(function () {
                 var b = a(window),
                         c = a(document.body),
                         content = '',
                         mycod = '',
                         operation = '',
                         form = '',
                         f = '',
                         mycodigo = '';
         
                 a("#ReSubir").on("show.bs.modal", function (b) {
                     var c = a(b.relatedTarget),
                             idsol = c.data("cidsol"),
                             tiposol = c.data("tiposol"),
                             user = c.data("user"),
                             tipodoc = c.data("tipodoc"),
                             e = a(this);
         
                     document.getElementById("idsol").value = idsol;
                     document.getElementById("tiposol").value = tiposol;
                     document.getElementById("user").value = user;
                     document.getElementById("tipo_doc").value = tipodoc;
         
         
                     e.find(".modal-title").text("SUBIR NUEVO DOCUMENTO");
                 });
         
                 a("#JuntaDirectiva").on("show.bs.modal", function (b) {
                     var c = a(b.relatedTarget),
                             cod_sol = c.data("codigo"),
                             nombre = c.data("nombre"),
                             e = a(this);
                     document.getElementById("cod_sol").value = cod_sol;
                 });
         
                 a("#RegistrarMiembro").on("click", function () {
         
                     var b = a(this), dataString;
                     var holder = '';
                     var exito = true;
                     $(".obligate3").each(function () {
                         if ($(this).val() == '') {
                             $(this).focus();
                             holder = $(this).attr("data-content");
                             exito = false;
                             $(".msg3").html("").show();
                             $(".msg3").html("<div class='alert alert-danger'><i class='fa fa-exclamation-triangle'></i> " + holder + "</div>");
                             setTimeout(function () {
                                 $(".msg3").fadeOut(1500);
                             }, 1500);
                             return false;
                         }
                     });
                     if (!exito)
                         return false;
                     dataString = $('#FormAgregarMiembro').serialize();
                     $.ajax({
                         type: "POST",
                         url: "{{base_url()}}/juntadirectiva/registrarrepresentante",
                         data: dataString,
                         dataType: 'json',
                         success: function (data) {
                             if (data.response == 'si') {
                                 $(".msg3").html("").show();
                                 $(".msg3").html(data.message);
                                 b.button("reset");
                                 setTimeout(function () {
                                     $(".msg3").fadeOut(1500);
                                 }, 1500);
                             } else {
                                 $('#JuntaDirectiva').modal('hide');
                                 $("#FormAgregarMiembro")[0].reset();
                                 ListarMiebros();
                             }
         
                         },
                         error: function () {
                             console.log("Ocurrió un error.");
                         }
                     })
                 });
         
             })
         }
         
         (jQuery), function () {
             "use strict";
             $('#fono').keyup(function () {
                 this.value = (this.value + '').replace(/[^0-9]/g, '');
             });
         
         }();
         
         
      </script>
      <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
      <script type="text/javascript">
         function GuardarSolicitud() {
             var formData = new FormData($("#formSolicitud")[0]);
             var resultado = "";
             $.ajax({
                 url: "{{ base_url() }}/admin/actualizarfechas",
                 async: false,
                 type: 'POST',
                 data: formData,
                 contentType: false,
                 enctype: 'multipart/form-data',
                 processData: false,
                 dataType: 'json',
                 success: function (datos) {
                     resultado = datos.response;
                     mensaje = datos.message;
                 }
             });
             return [resultado, mensaje];
         }
         
         function EditarSolicitud(codigo) {
             var codigo = codigo;
             $('#modalSolicitud').modal('show');
             $('#codigo').val(codigo);
             $('#accion').val('editar');
             return $.ajax({
                 type: "get",
                 url: '{{ base_url() }}/admin/adminsolicitud',
                 data: {
                     codigo: codigo
                 },
                 success: function (data) {
                     $.each(data, function (i, item) {
                         $('#numero').val(item.num_sol);
                         $('#inicio').val(item.inicio);
                         $('#fin').val(item.fin);
                     });
                 },
                 error: function () {
                 }
             });
         
         }
         ;
         
         function puestochange(sel) {
             if (sel.value == "43" || sel.value == "2") {
                 $("#div-otros").show();
             } else {
                 $("#div-otros").hide();
         
             }
         }
         ;
         
         function EliminarMiembro(codigo) {
             $.ajax({
                 type: "get",
                 url: "{{base_url()}}/juntadirectiva/eliminar",
                 data: {codigo: codigo, },
                 dataType: 'json',
                 success: function (data) {
                     if (data.response == 'si') {
                         ListarMiebros();
                     } else {
                         $(".msg3").html("").show();
                         $(".msg3").html("<div class='alert alert-warning'><i class='fa fa-warning'></i> Se ha producido un error, actualice la página por favor.</div>");
                         setTimeout(function () {
                             $(".msg3").fadeOut(1500);
                         }, 1500);
                         ListarMiebros();
                     }
         
                 },
                 error: function () {
                     console.log("Error");
                 }
             })
         }
         ;
         
         function buscarDni() {
             var dni;
             var usuario;
             var pass;
         
             usuario = 'GPV01';
             pass = '$GPV.2019';
             dni = $("#dni").val();
         
             if (dni.length == 8) {
                 BuscarPersonaDNI_WS_propietario('', dni, '', '', usuario, pass);
             } else {
                 limpiar_propietario();
                 bloquear_datosPropietario('0');
             }
         }
         
         function BuscarPersonaDNI_WS_propietario(key, dni, NROTAR, FECH, usuario, pass) {
         
         
             $.ajax({
                 url: 'https://pide.munlima.gob.pe/CWS/BuscarDatosPersonalesPIDE',
                 type: 'POST',
                 data:
                         {
                             nuDniConsulta: dni,
                             usuario: usuario,
                             pass: pass
         
                         },
                 beforeSend: function (e) {
         
                 },
                 success: function (data) {
                     var c = JSON.parse(data);
         
                     if (c.valor.return.coResultado = '0000') {
                         if (c.valor.return.datosPersona) {
                             bloquear_datosPropietario('1');
                             var a = c.valor.return.datosPersona;
                             var ubi = a.ubigeo.split("/");
                             $('#nombre').val(a.prenombres);
                             $('#apellido_pat').val(a.apPrimer);
                             $('#apellido_mat').val(a.apSegundo);
                             $('#direccion').val(a.direccion);
                             $('#departamento').val(ubi[0]);
                             $('#provincia').val(ubi[1]);
                             $('#distrito').val(ubi[2]);
                         } else {
                             limpiar_propietario();
                             bloquear_datosPropietario('0');
                         }
                     } else {
                         limpiar_propietario();
                         bloquear_datosPropietario('0');
                     }
                     $('#load').removeClass('load');
                 },
                 error: function (xhr, err) {
                     $('#load').removeClass('load');
                 }
             });
         
         }
         
         function limpiar_propietario() {
         
             $('#nombre').val('');
             $('#apellido_pat').val('');
             $('#apellido_mat').val('');
             $('#direccion').val('');
             $('#departamento').val('');
             $('#provincia').val('');
             $('#distrito').val('');
             $('#restriccion').val('');
         }
         
         function bloquear_datosPropietario(con) {
             if (con == '1') {
                 $('#nombres').attr('disabled');
                 $('#apellidopaterno').attr('disabled');
                 $('#apellidomaterno').attr('disabled');
                 $('#departamento').attr('disabled');
                 $('#provincia').attr('disabled');
                 $('#distrito').attr('disabled');
         
         
             } else {
                 $('#nombres').removeAttr('disabled');
                 $('#apellidopaterno').removeAttr('disabled');
                 $('#apellidomaterno').removeAttr('disabled');
                 $('#departamento').removeAttr('disabled');
                 $('#provincia').removeAttr('disabled');
                 $('#distrito').removeAttr('disabled');
         
             }
         }
         
         $(document).ready(function () {
             $('#juntadirectiva').DataTable({
         
                 "language": {
                     "lengthMenu": "Ver _MENU_ registros por página",
                     "zeroRecords": "No se encontraron resultados",
                     "info": "Viendo página _PAGE_ de _PAGES_",
                     "infoEmpty": "No existen resoluciones disponibles",
                     "infoFiltered": "(filtrado de un total de _MAX_ registros)",
                     "search": "Buscar:",
                     "paginate": {
                         "first": "Primero",
                         "last": "Último",
                         "next": "Siguiente",
                         "previous": "Anterior"
                     },
                 },
         
                 "lengthMenu": [5, 10, 15],
         
                 "pageLength": 10,
         
                 "ordering": false,
         
                 columnDefs: [{
                         targets: [0, 2, 3, 4]
                     },
                 ]
         
         
             });
         
         
         });
         
         
         $(document).ready(function () {
         
             ListarMiebros();
         
             var heights = $(".well").map(function () {
                 return $(this).height();
             }).get();
         
             maxHeight = Math.max.apply(null, heights);
         
             $(".well").height(maxHeight);
         });
         
         
         
         
         function format(d) {
             return '<div class="col-md-12"><strong>NOMBRE: </strong> ' + d.nombre + '<br>' +
                     '<strong>APELLIDO PATERNO: </strong> ' + d.apellido_pat + '<br>' +
                     '<strong>APELLIDO MATERNO: </strong> ' + d.apellido_mat + '<br>' +
                     '<strong>FECHA DE NACIMIENTO: </strong>' + d.fecha_nacimiento + '<br>' +
                     '<strong>SEXO: </strong>' + d.sexo + '<br>' +
                     '<strong>DESPARTAMENTO: </strong>' + d.departamento + '<br>' +
                     '<strong>PROVINCIA: </strong>' + d.provincia + '<br>' +
                     '<strong>DISTRITO: </strong>' + d.distrito + '</div>';
         
         }
         
         var childRows = null;
         
         function ListarMiebros() {
         
             var dt = $('#MiembrosJuntaDirectiva').DataTable({
         
                 destroy: true,
                 "language": {
                     "lengthMenu": "Ver _MENU_ registros por página",
                     "zeroRecords": "No se encontraron resultados",
                     "info": "Viendo página _PAGE_ de _PAGES_",
                     "infoEmpty": "No se encontraron responsables",
                     "infoFiltered": "(filtrado de un total de _MAX_ registros)",
                     "search": "Buscar:",
                     "paginate": {
                         "first": "Primero",
                         "last": "Último",
                         "next": "Siguiente",
                         "previous": "Anterior"
                     },
                 },
         
                 "ajax": {
                     "type": "get",
                     "url": "{{ base_url() }}/juntadirectiva/listarepresentantes",
                     "data": {cod_sol:   {{ model.codsol }} }
                 },
         
                 "columns": [
                     {
                         "class": "details-control",
                         "orderable": false,
                         "data": null,
                         "defaultContent": ""
                     },
                     {"data": "dni"},
                     {"data": "puesto"},
                     {"data": "nombre"},
                     {
                         "data": null,
                         render: function (data, type, row) {
                             return  row.apellido_pat + " " + row.apellido_mat;
                         },
                     },
                     {
                         "className": "center",
                         "mData": "codigo",
                         "mRender": function (data, type, row) {
                             return "<a class='btn btn-default' onclick='EliminarMiembro(" + data + ")' class='editor_remove'><i class='fa fa-remove'></i></a>";
                         }
                     },
                 ],
         
                 columnDefs: [
                     {
                         className: 'text-center',
                         targets: [],
                     }
                 ]
             });
         
         
             // Array to track the ids of the details displayed rows
             var detailRows = [];
         
             $('#MiembrosJuntaDirectiva tbody').off('click', 'tr td.details-control');
             $('#MiembrosJuntaDirectiva tbody').on('click', 'tr td.details-control', function () {
                 var tr = $(this).closest('tr');
                 var row = dt.row(tr);
         
                 if (row.child.isShown()) {
                     // This row is already open - close it
                     row.child.hide();
                     tr.removeClass('shown');
                 } else {
                     // Open this row
                     d = row.data();
                     row.child(format(d)).show();
                     tr.addClass('shown');
                 }
             });
         
         
             // On each draw, loop over the `detailRows` array and show any child rows
             dt.on('draw', function () {
         
                 // If reloading table then show previously shown rows
                 if (childRows) {
         
                     childRows.every(function (rowIdx, tableLoop, rowLoop) {
                         d = this.data();
                         this.child($(format(d))).show();
                         this.nodes().to$().addClass('shown');
                     });
         
                     // Reset childRows so loop is not executed each draw
                     childRows = null;
                 }
             });
         
         
         }
         
         
         //CAMBIO DE ESTADO DE DOCUMENTOS
         $('.cambiarestado').click(function () {
             col = $(this);
         
             $(this).html('<img src="../../dist/img/loader.gif"  style="margin-left:-3px;"/>');
             codigo = $(this).attr('data-codigo');
             estado = $(this).attr('data-estado');
             dataString = "codigo=" + codigo + "&estado=" + estado;
             $.ajax({
                 type: "get",
                 url: "{{ base_url() }}/documento/cambiarestado",
                 data: dataString,
                 dataType: 'json',
                 success: function (datos) {
                     if (datos.response == 'modificado') {
                         if (estado == 1) {
                             mensaje = "aprobado";
                         }
                         location.reload();
                     } else {
                         alert("Ocurrió un error");
                     }
                 },
                 error: function () {
                     location.reload();
                 }
         
             });
         });
         
         $(".guardarfechas").on("click", function (event) {
         
             event.preventDefault();
             var inicio = $('#inicio').val();
             var fin = $('#fin').val();
         
             if (inicio == "") {
                 Swal.fire({
                     icon: 'warning',
                     title: '¡Advertencia!',
                     text: 'Debe imgresar la fecha de inicio de vigencia',
                 })
             } else {
                 if (fin == "") {
                     Swal.fire({
                         icon: 'warning',
                         title: '¡Advertencia!',
                         text: 'Debe imgresar la fecha de fin de vigencia',
                     })
         
                 } else {
                     Swal.fire({
                         title: 'Está seguro?',
                         text: "No podrás revertir esto!",
                         icon: 'warning',
                         showCancelButton: true,
                         confirmButtonColor: '#3085d6',
                         cancelButtonColor: '#d33',
                         confirmButtonText: 'Sí, guardar!'
                     }).then((result) => {
                         if (result.value) {
                             var resp = GuardarSolicitud();
                             //resp = JSON.parse(resp);
                             if (resp[0] == "success") {
                                 Swal.fire({
                                     icon: 'success',
                                     title: '¡Éxito!',
                                     text: resp[1],
                                 }).then((result) => {
                                     if (result.value) {
                                         $('#modalSolicitud').modal('hide');
                                         location.reload();
                                     }
                                 });
                             } else {
                                 Swal.fire({
                                     icon: 'error',
                                     title: '¡Error!',
                                     text: resp[1],
                                 })
                             }
                         }
                     }) 
                 }
             }
         });
         
      </script>
</body>
</html>
{% endblock content %}
